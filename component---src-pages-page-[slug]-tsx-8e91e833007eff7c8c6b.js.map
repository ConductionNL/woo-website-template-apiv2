{"version":3,"file":"component---src-pages-page-[slug]-tsx-8e91e833007eff7c8c6b.js","mappings":"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","sources":["webpack://product-website-template/./src/templates/pages/PageTemplate.module.css","webpack://product-website-template/./src/services/sanitizeHtml.ts","webpack://product-website-template/./src/templates/pages/PageTemplate.tsx","webpack://product-website-template/./src/pages/page/[slug].tsx","webpack://product-website-template/./src/services/pageUtils.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport var container = \"PageTemplate-module--container--5bb24\";","export const sanitizeHtml = (html: string): string => {\n    if (typeof html !== \"string\") return \"\";\n    let safe = html;\n    safe = safe.replace(/<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/gi, \"\");\n    safe = safe.replace(/<style[\\s\\S]*?>[\\s\\S]*?<\\/style>/gi, \"\");\n    safe = safe.replace(/ on[a-z]+\\s*=\\s*\"[^\"]*\"/gi, \"\");\n    safe = safe.replace(/ on[a-z]+\\s*=\\s*'[^']*'/gi, \"\");\n    safe = safe.replace(/ on[a-z]+\\s*=\\s*[^\\s>]+/gi, \"\");\n    safe = safe.replace(/href\\s*=\\s*\"javascript:[^\"]*\"/gi, 'href=\"#\"');\n    safe = safe.replace(/href\\s*=\\s*'javascript:[^']*'/gi, \"href='#'\");\n    return safe;\n};\n","import * as React from \"react\";\nimport * as styles from \"./PageTemplate.module.css\";\nimport { Page, PageContent, AccordionProvider } from \"@utrecht/component-library-react/dist/css-module\";\nimport { useTranslation } from \"react-i18next\";\nimport { usePages } from \"../../hooks/pages\";\nimport { sanitizeHtml } from \"../../services/sanitizeHtml\";\nimport { getPagesList, getPageBySlug, getPageHtmlFromContents } from \"../../services/pageUtils\";\n\ninterface PageTemplateProps {\n  slug: string;\n}\n\nexport const PageTemplate: React.FC<PageTemplateProps> = ({ slug }) => {\n  const { t } = useTranslation();\n  const pagesQuery = usePages().getAll();\n\n  const page = React.useMemo(() => {\n    const data: any = (pagesQuery as any)?.data;\n    const list: any[] = getPagesList(data);\n    return getPageBySlug(list, slug);\n  }, [pagesQuery?.data, slug]);\n\n  const blocks: any[] = React.useMemo(\n    () =>\n      (Array.isArray(page?.contents) ? [...page.contents] : []).sort(\n        (a: any, b: any) => Number(a?.order ?? 0) - Number(b?.order ?? 0),\n      ),\n    [page],\n  );\n\n  return (\n    <Page>\n      <PageContent className={styles.container}>\n        {blocks.map((block: any, index: number) => {\n          const type: string = block?.type ?? \"\";\n          if (type === \"RichText\") {\n            const html: string = sanitizeHtml(block?.data?.content ?? \"\");\n            return <div key={`rt-${index}`} dangerouslySetInnerHTML={{ __html: html }} />;\n          }\n          if (type === \"Faq\") {\n            const items: any[] = Array.isArray(block?.data?.faqs) ? block.data.faqs : [];\n            const sections = items\n              .filter((it: any) => (it?.question ?? it?.answer ?? \"\").length > 0)\n              .map((it: any) => ({ label: it?.question ?? \"\", body: it?.answer ?? \"\" }));\n            return <AccordionProvider key={`faq-${index}`} sections={sections as any} />;\n          }\n          return null;\n        })}\n      </PageContent>\n    </Page>\n  );\n};\n","import * as React from \"react\";\nimport { PageProps } from \"gatsby\";\nimport { PageTemplate } from \"../../templates/pages/PageTemplate\";\n\nconst DynamicPage: React.FC<PageProps> = (props: PageProps) => {\n    const slug = props.params.slug as string;\n    return <PageTemplate slug={slug} />;\n};\n\nexport default DynamicPage;\n\n\n","import { isEntityVisibleForUser } from \"./menuUtils\";\n\nexport const getPagesList = (data: any): any[] => {\n    if (!data) return [];\n    return Array.isArray(data?.results) ? data.results : Array.isArray(data) ? data : [];\n};\n\nexport const getPageBySlug = (\n    items: any[],\n    slug: string,\n    userIsAuthenticated: boolean = false,\n    userGroups: string[] = [],\n): any | null => {\n    if (!Array.isArray(items) || items.length === 0) return null;\n\n    const isVisible = (p: any): boolean => {\n        const hideBefore = Boolean(p?.hideBeforeLogin);\n        const hideAfter = Boolean(p?.hideAfterLogin);\n\n        if (!userIsAuthenticated && hideBefore) return false;\n        if (userIsAuthenticated && hideAfter) return false;\n\n        return isEntityVisibleForUser(p, userIsAuthenticated, userGroups);\n    };\n\n    const normalizedSlug = String(slug ?? \"\").trim();\n    const candidate = items.find((p: any) => (p?.slug ?? \"\") === normalizedSlug);\n    if (!candidate) return null;\n\n    return isVisible(candidate) ? candidate : null;\n};\n\nexport const getPageHtmlFromContents = (page: any): string => {\n    if (!page) return \"\";\n    const blocks: any[] = Array.isArray(page?.contents) ? page.contents : [];\n    const richTexts = blocks\n        .filter((b: any) => (b?.type ?? \"\") === \"RichText\")\n        .sort((a: any, b: any) => Number(a?.order ?? 0) - Number(b?.order ?? 0))\n        .map((b: any) => b?.data?.content ?? \"\");\n    return richTexts.join(\"\\n\");\n};\n\n\n"],"names":["sanitizeHtml","html","safe","replace","React","styles","Page","PageContent","AccordionProvider","useTranslation","usePages","getPagesList","getPageBySlug","jsx","_jsx","PageTemplate","_ref","slug","t","pagesQuery","getAll","page","useMemo","data","list","blocks","Array","isArray","contents","_toConsumableArray","sort","a","b","_a$order","_b$order","Number","order","children","className","container","map","block","index","_block$type","type","_block$data$content","_block$data","content","dangerouslySetInnerHTML","__html","_block$data2","items","faqs","sections","filter","it","_ref2","_it$question","question","answer","length","_it$question2","_it$answer","label","body","DynamicPage","props","params","isEntityVisibleForUser","results","userIsAuthenticated","userGroups","isVisible","p","hideBefore","Boolean","hideBeforeLogin","hideAfter","hideAfterLogin","normalizedSlug","String","trim","candidate","find","_p$slug","getPageHtmlFromContents","richTexts","_b$type","_b$data$content","_b$data","join"],"sourceRoot":""}